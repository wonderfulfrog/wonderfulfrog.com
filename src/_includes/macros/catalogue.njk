{% from "macros/utils.njk" import stars %}

{% macro one(post, format) %}
<article class="[ posts-list-item column-gap-0.5 justify-between line-height-m ]">
    <a href="{{ post.url }}">{{ post.data.title }}</a>
    <time datetime="{{ post.date }}" class="[ text-fadeText ]">{{ post.date | formatDate("MM/DD") }}</time>
    <div class="[ cluster mt-0.5 ]">
        <div class="[ font-size-s ]"><p class="[ pill ]" data-state="small">{{ post.data.tags[1] }}</p></div>
        {% if post.data.rating %}
            {{ stars(post.data.rating) }}
        {% endif %}
    </div>
</article>
{% endmacro %}

{% macro list(posts) %}
<ol class="[ flow p-0 ]" role="list">
    {% for post in posts %}
        <li>
            {{ one(post, format) }}
        </li>
    {% endfor %}
</ol>
{% endmacro %}

{% macro yearList(posts, year, format = "MM/DD") %}
<section class="[ flow ]">
    <header class="[ cluster gap-0.5 ]">
        <h2>{{ year }}</h2>
        <p class="[ pill ]" data-state="extrasmall">
            {{ posts | length }}
        </p>
    </header>
    {{ list(posts, format) }}
</section>
{% endmacro %}

