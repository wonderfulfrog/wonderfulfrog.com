---
layout: "layouts/base"
pagination:
    data: collections.postsByTag
    size: 1
    alias: tag
    filter:
        - post
permalink: /tags/{{ tag | slugify }}/index.html
---

{% from "macros/posts.njk" import list %}
<h1>Tag: {{ tag }}</h1>
<p>
    All posts tagged with "{{ tag }}", or go back to <a href="/tags">all tags</a>.
</p>
{% set itemsByYear = collections.postsByTag[tag] | reverse | organizeByDate %}
{% set years = itemsByYear | keys | sort("desc") %}
<section class="[ flow ]">
    {% for year in years %}
        {% set itemsInYear = itemsByYear[year] %}
        <h2>{{ year }}</h2>
        <section>
            {{ list(itemsInYear) }}
        </section>
    {% endfor %}
</section>
